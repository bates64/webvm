FROM --platform=i386 rust:1.70-slim
ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get clean && apt-get update && apt-get -y upgrade
RUN apt-get -y install git bash curl vim

#RUN curl https://sh.rustup.rs -sSf | sh -s -- --profile minimal -y
#ENV PATH=.cargo/bin
RUN cargo install pigment64

RUN git clone https://github.com/pmret/papermario.git /var/papermario --verbose --depth=1

WORKDIR /var/papermario
RUN ./install_deps.sh
RUN ./install_compilers.sh

ENV HOME="/root" TERM="xterm" USER="root" SHELL="/bin/bash" LANG="en_US.UTF-8" LC_ALL="C"
RUN echo 'root:password' | chpasswd
CMD [ "/bin/bash" ]
